@startuml AI Tour Planner - System Architecture

!define RECTANGLE class
skinparam backgroundColor #FFFFFF
skinparam classAttributeIconSize 0
skinparam shadowing false
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam classFontSize 12
skinparam classFontStyle bold
skinparam classFontColor #333333
skinparam roundCorner 10

' Colors
defaultTextAlignment center
skinparam ArrowColor #666666
skinparam ArrowThickness 1.5

' Components
rectangle "Mobile/Web Client" as client #FFE0B2 {
  [React/Flutter\nFrontend] as frontend
  [State Management\n(Redux/Provider)] as state
  frontend -[hidden]d- state
}

rectangle "Backend Services" as backend #B3E5FC {
  [API Gateway\n(Flask)] as api
  [Authentication\n& Authorization] as auth
  [Itinerary\nService] as itinerary
  [Collaboration\nService] as collab
  [Real-time\nService] as realtime
  
  api -[hidden]d- auth
  auth -[hidden]d- itinerary
  itinerary -[hidden]d- collab
  collab -[hidden]d- realtime
}

rectangle "AI/ML Engine" as ai #C8E6C9 {
  [Recommendation\nEngine] as rec
  [Optimization\nEngine] as opt
  [NLP\nProcessor] as nlp
  
  rec -[hidden]d- opt
  opt -[hidden]d- nlp
}

rectangle "Data Layer" as data #D1C4E9 {
  [User\nDatabase] as userdb
  [Itinerary\nDatabase] as itindb
  [Cache\n(Redis)] as cache
  
  userdb -[hidden]d- itindb
  itindb -[hidden]d- cache
}

rectangle "External Services" as external #FFCCBC {
  [Google Maps\nAPI] as maps
  [Weather\nService] as weather
  [Payment\nGateway] as payment
  [Email\nService] as email
  
  maps -[hidden]d- weather
  weather -[hidden]d- payment
  payment -[hidden]d- email
}

' Connections
client --> api : HTTPS/WebSocket
api --> auth : Validate Token
api --> itinerary : Process Requests
api --> collab : Handle Collaboration
api --> realtime : Push Updates

itinerary --> rec : Get Recommendations
itinerary --> opt : Optimize Itinerary
itinerary --> nlp : Process User Input

api --> userdb : CRUD Operations
api --> itindb : CRUD Operations
api --> cache : Get/Set Cached Data

api --> maps : Get Locations/Routes
api --> weather : Get Forecast
api --> payment : Process Payments
api --> email : Send Notifications

' Legend
legend right
  <b>System Architecture</b>\n\n
  <b>Components:</b>
  --
  <color:#FFE0B2>Client</color> - User interface
  <color:#B3E5FC>Backend</color> - Core services
  <color:#C8E6C9>AI/ML</color> - Intelligence layer
  <color:#D1C4E9>Data</color> - Storage layer
  <color:#FFCCBC>External</color> - Third-party services

  <b>Protocols:</b>
  --
  HTTPS - Secure communication
  WebSocket - Real-time updates
  gRPC - Internal service calls
endlegend

@enduml
