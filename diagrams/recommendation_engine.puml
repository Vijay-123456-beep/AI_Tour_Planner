@startuml AI Tour Planner - Recommendation Engine

!include <office/Concepts/cloud>
!include <office/Concepts/document>"
!include <office/Servers/application_server>
!include <office/Concepts/database>

skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam roundCorner 10

' Colors
skinparam ArrowColor #666666
skinparam ArrowThickness 1.5

' Components
rectangle "Input Layer" as input #E3F2FD {
  [User Preferences] as prefs
  [Travel Constraints] as constraints
  [Historical Data] as history
  
  prefs -[hidden]d- constraints
  constraints -[hidden]d- history
}

rectangle "AI/ML Models" as models #E8F5E9 {
  rectangle "Collaborative Filtering" as cf {
    [User-User] as uu
    [Item-Item] as ii
  }
  
  rectangle "Content-Based" as cb {
    [Feature\nExtraction] as fe
    [Similarity\nScoring] as sim
  }
  
  rectangle "Hybrid Model" as hybrid {
    [Ensemble\nLearning] as ensemble
    [Weighted\nScoring] as weighted
  }
  
  uu -[hidden]d- ii
  fe -[hidden]d- sim
  ensemble -[hidden]d- weighted
}

rectangle "Optimization Layer" as opt #FFF3E0 {
  [Constraint\nSolver] as solver
  [Route\nOptimization] as route
  [Budget\nAllocation] as budget
  
  solver -[hidden]d- route
  route -[hidden]d- budget
}

rectangle "Output Layer" as output #F3E5F5 {
  [Personalized\nItinerary] as itinerary
  [Alternative\nOptions] as alternatives
  [Confidence\nScores] as confidence
  
  itinerary -[hidden]d- alternatives
  alternatives -[hidden]d- confidence
}

' Data Sources
cloud "External Data" as external #FFE0B2 {
  [POI Database] as poi
  [Weather API] as weather
  [Event Feeds] as events
  
  poi -[hidden]d- weather
  weather -[hidden]d- events
}

' Connections
input --> models : Process
models --> opt : Ranked Items
opt --> output : Optimized Plan
external --> models : Enrich Data

' Legend
legend right
  <b>AI Recommendation Engine</b>\n\n
  <b>Layers:</b>
  --
  <color:#E3F2FD>Input</color> - User data and constraints
  <color:#E8F5E9>AI/ML Models</color> - Recommendation algorithms
  <color:#FFF3E0>Optimization</color> - Constraint satisfaction
  <color:#F3E5F5>Output</color> - Final recommendations
  \n
  <b>Data Flow:</b>
  --
  → User preferences and constraints
  → Multi-model processing
  → Optimization and ranking
  → Personalized output
endlegend

@enduml
