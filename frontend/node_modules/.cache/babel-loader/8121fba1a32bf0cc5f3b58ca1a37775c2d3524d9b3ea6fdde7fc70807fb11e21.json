{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vijay\\\\OneDrive\\\\Desktop\\\\AI_Tour_Planner\\\\frontend\\\\src\\\\contexts\\\\ExpenseContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExpenseContext = /*#__PURE__*/createContext();\nexport const ExpenseProvider = ({\n  children\n}) => {\n  _s();\n  const [expenses, setExpenses] = useState([]);\n  const [splits, setSplits] = useState([]);\n  const addExpense = expense => {\n    const newExpense = {\n      id: Date.now(),\n      ...expense,\n      createdAt: new Date().toISOString(),\n      splits: expense.splitAmong || []\n    };\n    setExpenses([newExpense, ...expenses]);\n    return newExpense;\n  };\n  const deleteExpense = id => {\n    setExpenses(expenses.filter(e => e.id !== id));\n    setSplits(splits.filter(s => s.expenseId !== id));\n  };\n  const updateExpense = (id, updates) => {\n    setExpenses(expenses.map(e => e.id === id ? {\n      ...e,\n      ...updates\n    } : e));\n  };\n  const getExpense = id => {\n    return expenses.find(e => e.id === id);\n  };\n  const getExpensesByItinerary = itineraryId => {\n    return expenses.filter(e => e.itineraryId === itineraryId);\n  };\n  const calculateSplits = (itineraryId, travelers) => {\n    const itineraryExpenses = getExpensesByItinerary(itineraryId);\n    const totalAmount = itineraryExpenses.reduce((sum, e) => sum + (parseFloat(e.amount) || 0), 0);\n    const splits = {};\n    travelers.forEach(traveler => {\n      splits[traveler] = 0;\n    });\n    itineraryExpenses.forEach(expense => {\n      var _expense$splitAmong;\n      const splitAmount = expense.amount / (((_expense$splitAmong = expense.splitAmong) === null || _expense$splitAmong === void 0 ? void 0 : _expense$splitAmong.length) || 1);\n      (expense.splitAmong || []).forEach(traveler => {\n        splits[traveler] = (splits[traveler] || 0) + splitAmount;\n      });\n    });\n    return {\n      totalAmount,\n      splits\n    };\n  };\n  const getSettlements = (itineraryId, travelers, paidBy) => {\n    const {\n      splits\n    } = calculateSplits(itineraryId, travelers);\n    const totalPerPerson = Object.values(splits).reduce((a, b) => a + b, 0) / travelers.length;\n    const settlements = [];\n    Object.entries(splits).forEach(([person, amount]) => {\n      const diff = amount - totalPerPerson;\n      if (diff > 0.01) {\n        settlements.push({\n          from: person,\n          amount: diff.toFixed(2)\n        });\n      } else if (diff < -0.01) {\n        settlements.push({\n          to: person,\n          amount: Math.abs(diff).toFixed(2)\n        });\n      }\n    });\n    return settlements;\n  };\n  return /*#__PURE__*/_jsxDEV(ExpenseContext.Provider, {\n    value: {\n      expenses,\n      addExpense,\n      deleteExpense,\n      updateExpense,\n      getExpense,\n      getExpensesByItinerary,\n      calculateSplits,\n      getSettlements\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(ExpenseProvider, \"kvWoXNzb/9fchRVNhu0ZOtHyQew=\");\n_c = ExpenseProvider;\nexport const useExpense = () => {\n  _s2();\n  const context = useContext(ExpenseContext);\n  if (!context) {\n    throw new Error('useExpense must be used within ExpenseProvider');\n  }\n  return context;\n};\n_s2(useExpense, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ExpenseProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","jsxDEV","_jsxDEV","ExpenseContext","ExpenseProvider","children","_s","expenses","setExpenses","splits","setSplits","addExpense","expense","newExpense","id","Date","now","createdAt","toISOString","splitAmong","deleteExpense","filter","e","s","expenseId","updateExpense","updates","map","getExpense","find","getExpensesByItinerary","itineraryId","calculateSplits","travelers","itineraryExpenses","totalAmount","reduce","sum","parseFloat","amount","forEach","traveler","_expense$splitAmong","splitAmount","length","getSettlements","paidBy","totalPerPerson","Object","values","a","b","settlements","entries","person","diff","push","from","toFixed","to","Math","abs","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useExpense","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/vijay/OneDrive/Desktop/AI_Tour_Planner/frontend/src/contexts/ExpenseContext.js"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\r\n\r\nconst ExpenseContext = createContext();\r\n\r\nexport const ExpenseProvider = ({ children }) => {\r\n    const [expenses, setExpenses] = useState([]);\r\n    const [splits, setSplits] = useState([]);\r\n\r\n    const addExpense = (expense) => {\r\n        const newExpense = {\r\n            id: Date.now(),\r\n            ...expense,\r\n            createdAt: new Date().toISOString(),\r\n            splits: expense.splitAmong || []\r\n        };\r\n        setExpenses([newExpense, ...expenses]);\r\n        return newExpense;\r\n    };\r\n\r\n    const deleteExpense = (id) => {\r\n        setExpenses(expenses.filter(e => e.id !== id));\r\n        setSplits(splits.filter(s => s.expenseId !== id));\r\n    };\r\n\r\n    const updateExpense = (id, updates) => {\r\n        setExpenses(expenses.map(e => e.id === id ? { ...e, ...updates } : e));\r\n    };\r\n\r\n    const getExpense = (id) => {\r\n        return expenses.find(e => e.id === id);\r\n    };\r\n\r\n    const getExpensesByItinerary = (itineraryId) => {\r\n        return expenses.filter(e => e.itineraryId === itineraryId);\r\n    };\r\n\r\n    const calculateSplits = (itineraryId, travelers) => {\r\n        const itineraryExpenses = getExpensesByItinerary(itineraryId);\r\n        const totalAmount = itineraryExpenses.reduce((sum, e) => sum + (parseFloat(e.amount) || 0), 0);\r\n\r\n        const splits = {};\r\n        travelers.forEach(traveler => {\r\n            splits[traveler] = 0;\r\n        });\r\n\r\n        itineraryExpenses.forEach(expense => {\r\n            const splitAmount = expense.amount / (expense.splitAmong?.length || 1);\r\n            (expense.splitAmong || []).forEach(traveler => {\r\n                splits[traveler] = (splits[traveler] || 0) + splitAmount;\r\n            });\r\n        });\r\n\r\n        return { totalAmount, splits };\r\n    };\r\n\r\n    const getSettlements = (itineraryId, travelers, paidBy) => {\r\n        const { splits } = calculateSplits(itineraryId, travelers);\r\n        const totalPerPerson = Object.values(splits).reduce((a, b) => a + b, 0) / travelers.length;\r\n\r\n        const settlements = [];\r\n        Object.entries(splits).forEach(([person, amount]) => {\r\n            const diff = amount - totalPerPerson;\r\n            if (diff > 0.01) {\r\n                settlements.push({ from: person, amount: diff.toFixed(2) });\r\n            } else if (diff < -0.01) {\r\n                settlements.push({ to: person, amount: Math.abs(diff).toFixed(2) });\r\n            }\r\n        });\r\n\r\n        return settlements;\r\n    };\r\n\r\n    return (\r\n        <ExpenseContext.Provider value={{\r\n            expenses,\r\n            addExpense,\r\n            deleteExpense,\r\n            updateExpense,\r\n            getExpense,\r\n            getExpensesByItinerary,\r\n            calculateSplits,\r\n            getSettlements\r\n        }}>\r\n            {children}\r\n        </ExpenseContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useExpense = () => {\r\n    const context = useContext(ExpenseContext);\r\n    if (!context) {\r\n        throw new Error('useExpense must be used within ExpenseProvider');\r\n    }\r\n    return context;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}