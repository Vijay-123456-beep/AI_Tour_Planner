{"ast":null,"code":"import api from './api';\nexport const fetchWeatherForecast = async (destination, startDate, endDate, interests = []) => {\n  try {\n    // Call backend API first\n    try {\n      const interestsParam = interests.join(',');\n      const response = await api.get('/weather/forecast', {\n        params: {\n          destination,\n          start_date: startDate,\n          end_date: endDate,\n          interests: interestsParam\n        }\n      });\n      return response.data.data;\n    } catch (apiError) {\n      console.warn('Backend API error, falling back to mock data:', apiError);\n      // Fallback to mock data if API fails\n      return generateMockWeatherData(destination, startDate, endDate);\n    }\n  } catch (error) {\n    console.error('Weather fetch error:', error);\n    throw error;\n  }\n};\nconst generateMockWeatherData = (destination, startDate, endDate) => {\n  const forecast = generateMockForecast(startDate, endDate);\n  const avgTemp = forecast.reduce((sum, day) => sum + day.temp, 0) / forecast.length;\n  return {\n    destination,\n    startDate,\n    endDate,\n    forecast,\n    summary: {\n      avgTemp: Math.round(avgTemp),\n      condition: 'Partly Cloudy',\n      precipitation: '20%',\n      windSpeed: '10 km/h'\n    },\n    packingRecommendations: getWeatherRecommendations(forecast)\n  };\n};\nconst generateMockForecast = (startDate, endDate) => {\n  const forecast = [];\n  const start = new Date(startDate);\n  const end = new Date(endDate);\n  const conditions = ['Sunny', 'Cloudy', 'Rainy', 'Partly Cloudy', 'Overcast'];\n  for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n    forecast.push({\n      date: new Date(d).toISOString().split('T')[0],\n      temp: Math.floor(Math.random() * 15 + 20),\n      // 20-35°C\n      condition: conditions[Math.floor(Math.random() * conditions.length)],\n      humidity: Math.floor(Math.random() * 40 + 40),\n      // 40-80%\n      windSpeed: Math.floor(Math.random() * 20 + 5),\n      // 5-25 km/h\n      precipitation: Math.floor(Math.random() * 100) // 0-100%\n    });\n  }\n  return forecast;\n};\nexport const getWeatherRecommendations = forecast => {\n  const recommendations = [];\n  forecast.forEach(day => {\n    if (day.condition === 'Rainy' || day.precipitation > 60) {\n      recommendations.push(`${day.date}: Carry umbrella and waterproof bag`);\n    }\n    if (day.temp > 30) {\n      recommendations.push(`${day.date}: Use sunscreen and stay hydrated`);\n    }\n    if (day.windSpeed > 20) {\n      recommendations.push(`${day.date}: Secure loose items, windy conditions`);\n    }\n  });\n  return recommendations;\n};\nexport const getHealthTips = async (destination, startDate, endDate) => {\n  try {\n    const response = await api.post('/weather/health-tips', {\n      destination,\n      start_date: startDate,\n      end_date: endDate\n    });\n    return response.data.data;\n  } catch (error) {\n    console.error('Error fetching health tips:', error);\n    return {};\n  }\n};","map":{"version":3,"names":["api","fetchWeatherForecast","destination","startDate","endDate","interests","interestsParam","join","response","get","params","start_date","end_date","data","apiError","console","warn","generateMockWeatherData","error","forecast","generateMockForecast","avgTemp","reduce","sum","day","temp","length","summary","Math","round","condition","precipitation","windSpeed","packingRecommendations","getWeatherRecommendations","start","Date","end","conditions","d","setDate","getDate","push","date","toISOString","split","floor","random","humidity","recommendations","forEach","getHealthTips","post"],"sources":["C:/Users/vijay/OneDrive/Desktop/AI_Tour_Planner/frontend/src/services/weatherService.js"],"sourcesContent":["import api from './api';\r\n\r\nexport const fetchWeatherForecast = async (destination, startDate, endDate, interests = []) => {\r\n    try {\r\n        // Call backend API first\r\n        try {\r\n            const interestsParam = interests.join(',');\r\n            const response = await api.get('/weather/forecast', {\r\n                params: {\r\n                    destination,\r\n                    start_date: startDate,\r\n                    end_date: endDate,\r\n                    interests: interestsParam\r\n                }\r\n            });\r\n            return response.data.data;\r\n        } catch (apiError) {\r\n            console.warn('Backend API error, falling back to mock data:', apiError);\r\n            // Fallback to mock data if API fails\r\n            return generateMockWeatherData(destination, startDate, endDate);\r\n        }\r\n    } catch (error) {\r\n        console.error('Weather fetch error:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nconst generateMockWeatherData = (destination, startDate, endDate) => {\r\n    const forecast = generateMockForecast(startDate, endDate);\r\n    const avgTemp = forecast.reduce((sum, day) => sum + day.temp, 0) / forecast.length;\r\n    \r\n    return {\r\n        destination,\r\n        startDate,\r\n        endDate,\r\n        forecast,\r\n        summary: {\r\n            avgTemp: Math.round(avgTemp),\r\n            condition: 'Partly Cloudy',\r\n            precipitation: '20%',\r\n            windSpeed: '10 km/h'\r\n        },\r\n        packingRecommendations: getWeatherRecommendations(forecast)\r\n    };\r\n};\r\n\r\nconst generateMockForecast = (startDate, endDate) => {\r\n    const forecast = [];\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n\r\n    const conditions = ['Sunny', 'Cloudy', 'Rainy', 'Partly Cloudy', 'Overcast'];\r\n\r\n    for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\r\n        forecast.push({\r\n            date: new Date(d).toISOString().split('T')[0],\r\n            temp: Math.floor(Math.random() * 15 + 20), // 20-35°C\r\n            condition: conditions[Math.floor(Math.random() * conditions.length)],\r\n            humidity: Math.floor(Math.random() * 40 + 40), // 40-80%\r\n            windSpeed: Math.floor(Math.random() * 20 + 5), // 5-25 km/h\r\n            precipitation: Math.floor(Math.random() * 100) // 0-100%\r\n        });\r\n    }\r\n\r\n    return forecast;\r\n};\r\n\r\nexport const getWeatherRecommendations = (forecast) => {\r\n    const recommendations = [];\r\n\r\n    forecast.forEach(day => {\r\n        if (day.condition === 'Rainy' || day.precipitation > 60) {\r\n            recommendations.push(`${day.date}: Carry umbrella and waterproof bag`);\r\n        }\r\n        if (day.temp > 30) {\r\n            recommendations.push(`${day.date}: Use sunscreen and stay hydrated`);\r\n        }\r\n        if (day.windSpeed > 20) {\r\n            recommendations.push(`${day.date}: Secure loose items, windy conditions`);\r\n        }\r\n    });\r\n\r\n    return recommendations;\r\n};\r\n\r\nexport const getHealthTips = async (destination, startDate, endDate) => {\r\n    try {\r\n        const response = await api.post('/weather/health-tips', {\r\n            destination,\r\n            start_date: startDate,\r\n            end_date: endDate\r\n        });\r\n        return response.data.data;\r\n    } catch (error) {\r\n        console.error('Error fetching health tips:', error);\r\n        return {};\r\n    }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}